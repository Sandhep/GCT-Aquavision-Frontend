{"ast":null,"code":"import Switch from'@mui/material/Switch';import FormControlLabel from'@mui/material/FormControlLabel';import Box from'@mui/material/Box';import{useDispatch,useSelector}from\"react-redux\";import{toggle}from\"../features/switch\";import{changeposition}from'../features/switchstate';import io from\"socket.io-client\";import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";function SwitchCard(){const socket=io.connect(\"https://gct-aquavison-server.onrender.com\");const dispatch=useDispatch();const g_checked=useSelector(state=>state.switch.value);const g_state=useSelector(state=>state.switchstate.value);const handleChange=async event=>{const isChecked=event.target.checked;dispatch(toggle({checked:isChecked}));dispatch(changeposition({position:isChecked?'ON':'OFF'}));socket.emit(\"PumpState\",{Pump_State:isChecked?\"ON\":\"OFF\"});};useEffect(()=>{const handlePumpState=data=>{dispatch(toggle({checked:data.Pump_State===\"ON\"?true:false}));dispatch(changeposition({position:data.Pump_State}));socket.off(\"connected\",handlePumpState);};socket.on(\"connected\",handlePumpState);socket.on(\"Received_PumpState\",handlePumpState);return()=>{socket.off(\"connected\",handlePumpState);};},[dispatch,socket]);return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:g_checked,onChange:handleChange}),label:g_state})});}export default SwitchCard;","map":{"version":3,"names":["Switch","FormControlLabel","Box","useDispatch","useSelector","toggle","changeposition","io","useEffect","jsx","_jsx","SwitchCard","socket","connect","dispatch","g_checked","state","switch","value","g_state","switchstate","handleChange","event","isChecked","target","checked","position","emit","Pump_State","handlePumpState","data","off","on","children","control","onChange","label"],"sources":["C:/Projects/React Projects/Dashboard/dashboard/src/components/SwitchCard.js"],"sourcesContent":["import Switch from '@mui/material/Switch';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Box from '@mui/material/Box';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toggle } from \"../features/switch\";\r\nimport { changeposition } from '../features/switchstate';\r\nimport io from \"socket.io-client\";\r\nimport { useEffect } from 'react';\r\n\r\n\r\nfunction SwitchCard() {\r\n\r\n  const socket=io.connect(\"https://gct-aquavison-server.onrender.com\");\r\n\r\n  const dispatch = useDispatch();\r\n  const g_checked = useSelector(state => state.switch.value);\r\n  const g_state = useSelector(state => state.switchstate.value);\r\n\r\n  const handleChange = async(event) => {\r\n    const isChecked = event.target.checked;\r\n    dispatch(toggle({ checked: isChecked }));\r\n    dispatch(changeposition({ position: isChecked ? 'ON' : 'OFF' }));\r\n    socket.emit(\"PumpState\",{Pump_State:isChecked ? \"ON\":\"OFF\"});\r\n  };\r\n  \r\n  useEffect(() => {\r\n    const handlePumpState = (data) => {\r\n      dispatch(toggle({ checked: data.Pump_State === \"ON\" ? true : false }));\r\n      dispatch(changeposition({ position: data.Pump_State }));\r\n      socket.off(\"connected\",handlePumpState); \r\n    };\r\n    socket.on(\"connected\",handlePumpState);\r\n    socket.on(\"Received_PumpState\",handlePumpState);\r\n\r\n    return () => {\r\n      socket.off(\"connected\",handlePumpState); \r\n    };\r\n     \r\n  },[dispatch,socket]); \r\n  \r\n  return (\r\n    <Box>\r\n      <FormControlLabel\r\n        control={\r\n          <Switch\r\n            checked={g_checked}\r\n            onChange={handleChange}\r\n          />\r\n        }\r\n        label={g_state}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default SwitchCard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,gBAAgB,KAAM,gCAAgC,CAC7D,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CACnC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CACjC,OAASC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAGlC,QAAS,CAAAC,UAAUA,CAAA,CAAG,CAEpB,KAAM,CAAAC,MAAM,CAACL,EAAE,CAACM,OAAO,CAAC,2CAA2C,CAAC,CAEpE,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAY,SAAS,CAAGX,WAAW,CAACY,KAAK,EAAIA,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC1D,KAAM,CAAAC,OAAO,CAAGf,WAAW,CAACY,KAAK,EAAIA,KAAK,CAACI,WAAW,CAACF,KAAK,CAAC,CAE7D,KAAM,CAAAG,YAAY,CAAG,KAAM,CAAAC,KAAK,EAAK,CACnC,KAAM,CAAAC,SAAS,CAAGD,KAAK,CAACE,MAAM,CAACC,OAAO,CACtCX,QAAQ,CAACT,MAAM,CAAC,CAAEoB,OAAO,CAAEF,SAAU,CAAC,CAAC,CAAC,CACxCT,QAAQ,CAACR,cAAc,CAAC,CAAEoB,QAAQ,CAAEH,SAAS,CAAG,IAAI,CAAG,KAAM,CAAC,CAAC,CAAC,CAChEX,MAAM,CAACe,IAAI,CAAC,WAAW,CAAC,CAACC,UAAU,CAACL,SAAS,CAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAC9D,CAAC,CAEDf,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,eAAe,CAAIC,IAAI,EAAK,CAChChB,QAAQ,CAACT,MAAM,CAAC,CAAEoB,OAAO,CAAEK,IAAI,CAACF,UAAU,GAAK,IAAI,CAAG,IAAI,CAAG,KAAM,CAAC,CAAC,CAAC,CACtEd,QAAQ,CAACR,cAAc,CAAC,CAAEoB,QAAQ,CAAEI,IAAI,CAACF,UAAW,CAAC,CAAC,CAAC,CACvDhB,MAAM,CAACmB,GAAG,CAAC,WAAW,CAACF,eAAe,CAAC,CACzC,CAAC,CACDjB,MAAM,CAACoB,EAAE,CAAC,WAAW,CAACH,eAAe,CAAC,CACtCjB,MAAM,CAACoB,EAAE,CAAC,oBAAoB,CAACH,eAAe,CAAC,CAE/C,MAAO,IAAM,CACXjB,MAAM,CAACmB,GAAG,CAAC,WAAW,CAACF,eAAe,CAAC,CACzC,CAAC,CAEH,CAAC,CAAC,CAACf,QAAQ,CAACF,MAAM,CAAC,CAAC,CAEpB,mBACEF,IAAA,CAACR,GAAG,EAAA+B,QAAA,cACFvB,IAAA,CAACT,gBAAgB,EACfiC,OAAO,cACLxB,IAAA,CAACV,MAAM,EACLyB,OAAO,CAAEV,SAAU,CACnBoB,QAAQ,CAAEd,YAAa,CACxB,CACF,CACDe,KAAK,CAAEjB,OAAQ,CAChB,CAAC,CACC,CAAC,CAEV,CAEA,cAAe,CAAAR,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}